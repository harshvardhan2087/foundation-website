{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Lenovo/Downloads/foundation-website/app/api/send-enquiry/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\n\nconst RESEND_API_KEY = process.env.RESEND_API_KEY\nconst FOUNDATION_EMAIL = process.env.FOUNDATION_EMAIL\n\nexport async function POST(request: NextRequest) {\n  try {\n    const body = await request.json()\n    const { name, email, phone, location, message } = body\n\n    // Validate required fields\n    if (!name || !email || !phone || !location || !message) {\n      return NextResponse.json({ error: \"All fields are required\" }, { status: 400 })\n    }\n\n    if (!RESEND_API_KEY) {\n      console.error(\"[v0] RESEND_API_KEY not configured\")\n      return NextResponse.json({ error: \"Email service not configured\" }, { status: 500 })\n    }\n\n    // Send email to foundation\n    const emailResponse = await fetch(\"https://api.resend.com/emails\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${RESEND_API_KEY}`,\n      },\n      body: JSON.stringify({\n        from: \"Aapka Sahyog Foundation <onboarding@resend.dev>\",\n        to: FOUNDATION_EMAIL,\n        subject: `New Enquiry from ${name}`,\n        html: `\n          <h2>New Enquiry Received</h2>\n          <p><strong>Name:</strong> ${name}</p>\n          <p><strong>Email:</strong> ${email}</p>\n          <p><strong>Phone:</strong> ${phone}</p>\n          <p><strong>Location:</strong> ${location}</p>\n          <h3>Message:</h3>\n          <p>${message.replace(/\\n/g, \"<br>\")}</p>\n          <hr>\n          <p><small>This is an automated message from Aapka Sahyog Foundation website</small></p>\n        `,\n      }),\n    })\n\n    if (!emailResponse.ok) {\n      const errorData = await emailResponse.json()\n      console.error(\"[v0] Email send failed:\", errorData)\n      return NextResponse.json({ error: \"Failed to send email\" }, { status: 500 })\n    }\n\n    // Also send confirmation email to user\n    await fetch(\"https://api.resend.com/emails\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${RESEND_API_KEY}`,\n      },\n      body: JSON.stringify({\n        from: \"Aapka Sahyog Foundation <onboarding@resend.dev>\",\n        to: email,\n        subject: \"We received your enquiry - Aapka Sahyog Foundation\",\n        html: `\n          <h2>Thank You for Your Enquiry</h2>\n          <p>Dear ${name},</p>\n          <p>We have received your message and appreciate your interest in Aapka Sahyog Foundation.</p>\n          <p>Our team will review your enquiry and get back to you shortly.</p>\n          <p><strong>Your Message Details:</strong></p>\n          <p>${message}</p>\n          <hr>\n          <p>For urgent matters, please contact us at:</p>\n          <p>Phone: +91 99997 67640</p>\n          <p>Email: info@aapkasahyog.org</p>\n          <p><small>Aapka Sahyog Foundation - Reg. No. 49/2025/Jewar</small></p>\n        `,\n      }),\n    })\n\n    return NextResponse.json(\n      {\n        message: \"Enquiry sent successfully\",\n        data: body,\n      },\n      { status: 200 },\n    )\n  } catch (error) {\n    console.error(\"[v0] Error processing enquiry:\", error)\n    return NextResponse.json({ error: \"Failed to process enquiry\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,iBAAiB,QAAQ,GAAG,CAAC,cAAc;AACjD,MAAM,mBAAmB,QAAQ,GAAG,CAAC,gBAAgB;AAE9C,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,QAAQ,EAAE,OAAO,EAAE,GAAG;QAElD,2BAA2B;QAC3B,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS,CAAC,YAAY,CAAC,SAAS;YACtD,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,IAAI,CAAC,gBAAgB;YACnB,QAAQ,KAAK,CAAC;YACd,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA+B,GAAG;gBAAE,QAAQ;YAAI;QACpF;QAEA,2BAA2B;QAC3B,MAAM,gBAAgB,MAAM,MAAM,iCAAiC;YACjE,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,eAAe,CAAC,OAAO,EAAE,gBAAgB;YAC3C;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,MAAM;gBACN,IAAI;gBACJ,SAAS,CAAC,iBAAiB,EAAE,MAAM;gBACnC,MAAM,CAAC;;oCAEqB,EAAE,KAAK;qCACN,EAAE,MAAM;qCACR,EAAE,MAAM;wCACL,EAAE,SAAS;;aAEtC,EAAE,QAAQ,OAAO,CAAC,OAAO,QAAQ;;;QAGtC,CAAC;YACH;QACF;QAEA,IAAI,CAAC,cAAc,EAAE,EAAE;YACrB,MAAM,YAAY,MAAM,cAAc,IAAI;YAC1C,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAuB,GAAG;gBAAE,QAAQ;YAAI;QAC5E;QAEA,uCAAuC;QACvC,MAAM,MAAM,iCAAiC;YAC3C,QAAQ;YACR,SAAS;gBACP,gBAAgB;gBAChB,eAAe,CAAC,OAAO,EAAE,gBAAgB;YAC3C;YACA,MAAM,KAAK,SAAS,CAAC;gBACnB,MAAM;gBACN,IAAI;gBACJ,SAAS;gBACT,MAAM,CAAC;;kBAEG,EAAE,KAAK;;;;aAIZ,EAAE,QAAQ;;;;;;QAMf,CAAC;YACH;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,MAAM;QACR,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAA4B,GAAG;YAAE,QAAQ;QAAI;IACjF;AACF"}}]
}